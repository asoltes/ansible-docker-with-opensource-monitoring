# tasks file for docker-cacti
- name: cloning docker-cacti repository please wait ... 
  ansible.builtin.git:
    repo: https://github.com/scline/docker-cacti.git
    dest: /opt/docker-cacti
    single_branch: yes
    version: master
    force: yes

- name: changing default sensitive environment variables value
  template:
    src: cacti_single_install.j2
    dest: '{{ docker_compose_dir }}/{{ cacti_deployment }}'

- name: rename {{ cacti_deployment }} to docker-compose.yml
  command: mv {{ docker_compose_dir }}/{{ cacti_deployment }} {{ docker_compose_dir }}/docker-compose.yml #change {{ cacti_deployment }} in roles/docker-cacti/default/
  
- name: Running `docker-compose up -d` please wait ...
  community.docker.docker_compose:
    project_src: '{{ docker_compose_dir }}'
    build: no #set to yes on first run
  register: output